<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">

  <title>Genshi with ElementTree</title>

  <meta name="description" content="A jQuery library for modern HTML presentations">
  <meta name="author" content="Caleb Troughton">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <!-- Core and extension CSS files -->
  <link rel="stylesheet" href="../core/deck.core.css">
  <link rel="stylesheet" href="../extensions/goto/deck.goto.css">
  <link rel="stylesheet" href="../extensions/menu/deck.menu.css">
  <link rel="stylesheet" href="../extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" href="../extensions/status/deck.status.css">
  <link rel="stylesheet" href="../extensions/hash/deck.hash.css">

  <!-- Theme CSS files (menu swaps these out) -->
  <link rel="stylesheet" href="../themes/style/web-2.0.css">
  <link rel="stylesheet" href="../themes/transition/horizontal-slide.css">

  <!-- Custom CSS just for this page -->
  <link rel="stylesheet" href="style.css">

  <script src="../modernizr.custom.js"></script>
</head>

<body class="deck-container">

<section class="slide" id="title-slide">
<h1>Making Genshi and ElementTree play nicely together</h1>
</section>

<section class="slide" id="survey">
<h2>First, a quick test</h2>
<h3>Hands up if you have:</h3>
<ul>
  <li class="slide">Heard of ElementTree?</li>
  <li class="slide">Heard of Genshi?</li>
  <li class="slide">Used Genshi?</li>
  <li class="slide">Dug into Genshi's guts?</li>
</ul>
</section>

<section class="slide" id="xml-methods">
<h2>Methods of generating XML/HTML</h2>
<div class="slide">
<h3>Method 1: DOM</h3>
  <p>
    <strong>Advantages:</strong> Built into Python ... err ... that's it<br />
    <strong>Disadvantages:</strong> Too numerous to mention
  </p>
</div>
<div class="slide">
<h3>Method 2: ElementTree</h3>
  <p>
    <strong>Advantages:</strong> Built into Python, simple, fast<br />
    <strong>Disadvantages:</strong> Despite being better than DOM it's still not exactly "Pythonic"
  </p>
</div>
<div class="slide">
<h3>Method 3: Genshi ElementFactory</h3>
  <p>
    <strong>Advantages:</strong> Definitely Pythonic<br />
    <strong>Disadvantages:</strong> Produces strings which makes post-processing ugly without a reparse step
  </p>
</div>
</section>

<section class="slide" id="demo">
<h2>By way of demonstration...</h2>
<p>By way of demonstration, let's create the following document manually in
each:</p>
<pre class="code"><code class="xml">&lt;movie&gt;
  &lt;title&gt;Serenity&lt;/title&gt;
  &lt;genre&gt;science-fiction&lt;/genre&gt;
  &lt;imdb href=&quot;http://www.imdb.com/title/tt0379786/&quot; /&gt;
&lt;/movie&gt;</code></pre>
</section>

<section class="slide" id="demo-dom">
<h2>DOM version</h2>
<pre class="code"><code class="python">import xml.dom

impl = xml.dom.getDOMImplementation()
doc = impl.createDocument('', 'movie', '')
title = doc.createElement('title')
title.appendChild(doc.createTextNode('Serenity'))
doc.documentElement.appendChild(title)
genre = doc.createElement('genre')
genre.appendChild(doc.createTextNode('science-fiction'))
doc.documentElement.appendChild(genre)
imdb = doc.createElement('imdb')
imdb.setAttribute('href', 'http://www.imdb.com/title/tt0379786/')
doc.documentElement.appendChild(imdb)

print doc.toxml('UTF-8')</code></pre>
</section>

<section class="slide" id="demo-et">
<h2>ElementTree version</h2>
<pre class="code"><code class="python">import xml.etree.ElementTree as et

doc = et.Element('movie')
et.SubElement(doc, 'title').text = 'Serenity'
et.SubElement(doc, 'genre').text = 'science-fiction')
et.SubElement(doc, 'imdb').attrib['href'] = 'http://www.imdb.com/title/tt0379786/'

print et.tostring(doc)</code></pre>
</section>

<section class="slide" id="demo-genshi">
<h2>Genshi ElementFactory version</h2>
<pre class="code"><code class="python">import genshi.builder

tag = genshi.builder.ElementFactory()
print tag.movie(
    tag.title('Serenity'),
    tag.genre('science-fiction'),
    tag.imdb(href='http://www.imdb.com/title/tt0379786/')
)</code></pre>
<div class="slide">
  <p><strong>Question:</strong> how does Genshi know about my made-up &lt;movie&gt; element?</p>
</div>
</section>

<section class="slide" id="get-magic">
<h2>__get__ magic</h2>
<p>Genshi's ElementFactory overrides __get__ to generate unknown methods on the fly.</p>
</section>

<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<p class="deck-status">
  <span class="deck-status-current"></span>
  /
  <span class="deck-status-total"></span>
</p>

<form action="." method="get" class="goto-form">
  <label for="goto-slide">Go to slide:</label>
  <input type="number" name="slidenum" id="goto-slide">
  <input type="submit" value="Go">
</form>

<a href="." title="Permalink to this slide" class="deck-permalink">#</a>

<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../jquery-1.6.4.min.js"><\/script>')</script>
<script src="../jquery.beautyOfCode-min.js"></script>

<!-- Deck Core and extensions -->
<script src="../core/deck.core.js"></script>
<script src="../extensions/menu/deck.menu.js"></script>
<script src="../extensions/goto/deck.goto.js"></script>
<script src="../extensions/status/deck.status.js"></script>
<script src="../extensions/navigation/deck.navigation.js"></script>
<script src="../extensions/hash/deck.hash.js"></script>
<script src="base.js"></script>

</body>
</html>
